<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>KC-135 Time Calc</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f172a">
  <style>
    :root { --bg:#0b1220; --card:#0f172a; --text:#e5e7eb; --muted:#9ca3af; --accent:#22c55e; --stroke:#1f2937; }
    * { box-sizing: border-box; }
    html,body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; }
    header { padding:10px 12px; background:#0f172a; position:sticky; top:0; z-index:2; border-bottom:1px solid #111827; }
    .head { max-width:520px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:10px; }
    h1 { font-size:1rem; margin:0; letter-spacing:0.3px; }
    .badge { display:flex; align-items:center; gap:8px; background:#0b1220; border:1px solid #1f2937; padding:6px 10px; border-radius:999px; }
    .badge img { width:28px; height:28px; border-radius:50%; object-fit:cover; }
    .badge .txt { font-size:0.75rem; color:#cbd5e1; white-space:nowrap; }
    .dot { opacity:0.5; padding:0 4px; }
    main { max-width:520px; margin:0 auto; padding:10px 8px 80px; }
    .card { background:var(--card); border:1px solid var(--stroke); border-radius:14px; padding:10px; }
    label { display:block; color:#cbd5e1; font-size:0.8rem; margin-bottom:4px; }
    input, select, button { width:100%; padding:10px; border-radius:12px; border:1px solid var(--stroke); background:#0b1220; color:#e5e7eb; font-size:0.95rem; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
    .row-3 { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; }
    .btnbar { display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin-top:8px; }
    button.toggle.active { outline:2px solid var(--accent); }
    .section-title { font-weight:700; font-size:0.95rem; margin:10px 0 6px; }
    .timeline { margin-top:8px; background:#0b1220; border:1px solid var(--stroke); border-radius:12px; padding:8px; }
    .line { display:flex; justify-content:space-between; align-items:center; padding:6px 6px; border-bottom:1px dashed #1f2937; }
    .line:last-child { border-bottom:none; }
    .name { font-size:0.9rem; color:#e5e7eb; }
    .time { font-family: ui-monospace,Menlo,Consolas; font-weight:600; letter-spacing:0.5px; }
    .hint { color:#9ca3af; font-size:0.75rem; margin-left:6px; }
    .footer { margin:10px 0; text-align:center; color:#9ca3af; font-size:0.75rem; }
    .sticky-run { position:fixed; left:0; right:0; bottom:0; padding:10px; background:rgba(11,18,32,0.9); backdrop-filter: blur(6px); border-top:1px solid #111827; }
    .sticky-run .row { grid-template-columns: 1fr 1fr; }
    .tiny { font-size:0.75rem; color:#9ca3af; margin-top:2px; }
    ::placeholder { color:#64748b; opacity:1; }
    .nowbox{background:#0b1220;border:1px solid #1f2937;border-radius:10px;padding:10px;font-family:ui-monospace,Menlo,Consolas}
  </style>
</head>
<body>
  <header>
    <div class="head">
      <h1>KC-135 Time Calc</h1>
      <div class="badge">
        <img src="assets/simba.jpg" alt="SIMBA" onerror="this.style.display='none'">
        <div class="txt">CAO: 1NOV25 <span class="dot">•</span> Developed by “SIMBA”</div>
      </div>
    </div>
  </header>
  <main>
    <div class="card">
      <div class="row">
        <div>
          <label for="date">Date (Input TZ)</label>
          <input id="date" type="date">
        </div>
        <div>
          <label>Now</label>
          <div id="nowPanel" class="nowbox">--:--L / --:--Z (UTC±?)</div>
        </div>
      </div>

      <div class="row" style="margin-top:6px;">
        <div>
          <label for="tzDep">Departure TZ</label>
          <select id="tzDep"></select>
        </div>
        <div>
          <label for="tzArr">Arrival TZ</label>
          <select id="tzArr"></select>
        </div>
      </div>

      <div class="row" style="margin-top:6px;">
        <div>
          <label for="to">T/O (HH:MM Zulu)</label>
          <input id="to" type="text" inputmode="numeric" placeholder="1430 → 14:30Z">
          <div class="tiny">Enter Zulu. Type 4 digits; I’ll add the colon.</div>
        </div>
        <div>
          <label for="dur">Sortie Duration (HH:MM)</label>
          <input id="dur" type="text" inputmode="numeric" placeholder="0500 → 05:00">
        </div>
      </div>

      <div class="section-title">Crew Mode</div>
      <div class="btnbar">
        <button id="basic" class="toggle">BASIC FDP/CDT</button>
        <button id="aug" class="toggle">AUGMENTED FDP/CDT</button>
      </div>

      <div class="section-title">Mission Profile</div>
      <div class="btnbar">
        <button id="single" class="toggle">SINGLE SHIP</button>
        <button id="form" class="toggle">FORMATION</button>
      </div>

      <div class="section-title">Offsets prior to T/O</div>
      <div class="row-3">
        <div>
          <label for="off-show">Show</label>
          <select id="off-show"></select>
        </div>
        <div>
          <label for="off-brief">Brief</label>
          <select id="off-brief"></select>
        </div>
        <div>
          <label for="off-step">Step</label>
          <select id="off-step"></select>
        </div>
      </div>
      <div class="row" style="margin-top:6px;">
        <div>
          <label for="off-eng">Eng Start</label>
          <select id="off-eng"></select>
        </div>
        <div></div>
      </div>
    </div>

    <div class="section-title">Timeline</div>
    <div id="timeline" class="timeline"></div>

    <div class="footer">Works offline. Add to Home screen to install.</div>
  </main>

  <div class="sticky-run">
    <div class="row">
      <button id="calc" style="background:#22c55e;color:#0b1220;border:none;border-radius:10px;">Calculate</button>
      <button id="reset">Reset</button>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{});
      });
    }
  </script>
  <script src="app.js"></script>
</body>
</html>
